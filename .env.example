# =============================================================================
# Enalysis MVP - Environment Variables Template
# =============================================================================
# Copy this file to .env.local for local development
# NEVER commit .env or .env.local to git - they contain secrets!
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database

# Local development (Windows PostgreSQL):
DATABASE_URL="postgresql://postgres:YOUR_PASSWORD@localhost:5432/enalysis_mvp"

# Production options:
# Supabase: postgresql://postgres.[PROJECT_ID]:[PASSWORD]@aws-0-us-east-1.pooler.supabase.com:5432/postgres
# Neon: postgresql://[user]:[password]@[endpoint].neon.tech/[database]?sslmode=require
# Railway: Provided automatically when you provision PostgreSQL

# -----------------------------------------------------------------------------
# Security Secrets (CRITICAL - Generate new values for production!)
# -----------------------------------------------------------------------------
# Generate new secrets with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

# Session secret for JWT signing (REQUIRED)
SESSION_SECRET="CHANGE_ME_generate_with_openssl_rand_hex_64"

# Encryption secret for sensitive data in database (REQUIRED for production)
ENCRYPTION_SECRET="CHANGE_ME_generate_with_openssl_rand_hex_32"

# Cron job authentication secret (REQUIRED if using background jobs)
CRON_SECRET="CHANGE_ME_generate_with_openssl_rand_hex_32"

# -----------------------------------------------------------------------------
# OAuth - Enphase Solar API
# -----------------------------------------------------------------------------
# Register your application at: https://developer.enphase.com/
# Approval takes 1-3 business days
# Required for: Enphase solar systems and Enphase battery monitoring

ENPHASE_CLIENT_ID="your_enphase_client_id_here"
ENPHASE_CLIENT_SECRET="your_enphase_client_secret_here"
ENPHASE_REDIRECT_URI="http://localhost:3000/api/oauth/enphase/callback"

# Production redirect URI:
# ENPHASE_REDIRECT_URI="https://yourdomain.com/api/oauth/enphase/callback"

# -----------------------------------------------------------------------------
# OAuth - UtilityAPI (Utility Bill Data)
# -----------------------------------------------------------------------------
# Get your API token from: https://utilityapi.com/dashboard → Settings → API Keys
# Required for: Automatic utility bill imports (PG&E, SCE, SDG&E, etc.)

UTILITYAPI_API_TOKEN="your_utilityapi_token_here"
UTILITYAPI_REDIRECT_URI="http://localhost:3000/api/oauth/utilityapi/callback"

# UtilityAPI OAuth for specific utilities:
UTILITYAPI_CLIENT_ID_PGE="your_pge_form_id_here"
UTILITYAPI_OAUTH_AUTHORIZE_ENDPOINT_PGE="https://utilityapi.com/authorize/your_org_name"

# Production redirect URI:
# UTILITYAPI_REDIRECT_URI="https://yourdomain.com/api/oauth/utilityapi/callback"

# -----------------------------------------------------------------------------
# Python ML Service
# -----------------------------------------------------------------------------
# URL for the Python ML service (Prophet forecasting, recommendations)
# Local: http://localhost:8000
# Production: Deploy to Railway, Render, AWS ECS, or Google Cloud Run

ML_SERVICE_URL="http://localhost:8000"

# Production example:
# ML_SERVICE_URL="https://ml-service.yourdomain.com"

# -----------------------------------------------------------------------------
# Background Job Scheduler
# -----------------------------------------------------------------------------
# Set to "true" to enable automatic data sync jobs
# Auto-enabled in production, disabled by default in development

ENABLE_SCHEDULER=false

# Production:
# ENABLE_SCHEDULER=true

# -----------------------------------------------------------------------------
# External APIs - Weather (Optional but Recommended)
# -----------------------------------------------------------------------------
# Improves solar production forecasting accuracy

# OpenWeatherMap API (Free tier: 1,000 calls/day)
# Sign up at: https://openweathermap.org/api
OPENWEATHERMAP_API_KEY=""

# Solcast Solar API (Free tier: 50 calls/day)
# Sign up at: https://solcast.com/
SOLCAST_API_KEY=""

# -----------------------------------------------------------------------------
# External APIs - Carbon Intensity (Optional)
# -----------------------------------------------------------------------------
# Enables carbon-optimized battery scheduling and recommendations

# ElectricityMaps / CO2 Signal (Free tier: 50 requests/hour)
# Sign up at: https://www.electricitymaps.com/free-tier-api
ELECTRICITYMAPS_API_KEY=""
CO2SIGNAL_API_KEY=""  # Alternative name for same service

# WattTime API (Free for non-commercial use)
# Sign up at: https://www.watttime.org/api-documentation
WATTTIME_USERNAME=""
WATTTIME_PASSWORD=""

# -----------------------------------------------------------------------------
# External APIs - Grid Operators (Optional)
# -----------------------------------------------------------------------------
# For real-time electricity pricing from ISOs
# Most ISOs provide public data without authentication

# CAISO (California ISO) - No API key required for public OASIS data
# CAISO_API_KEY=""

# ERCOT (Texas)
# ERCOT_USERNAME=""
# ERCOT_PASSWORD=""

# PJM (Mid-Atlantic)
# PJM_USERNAME=""
# PJM_PASSWORD=""

# -----------------------------------------------------------------------------
# Monitoring & Error Tracking (Recommended for Production)
# -----------------------------------------------------------------------------

# Sentry Error Tracking
# Sign up at: https://sentry.io/
# SENTRY_DSN=""
# NEXT_PUBLIC_SENTRY_DSN=""

# Vercel Analytics (if deploying to Vercel)
# NEXT_PUBLIC_VERCEL_ANALYTICS_ID=""

# -----------------------------------------------------------------------------
# Application URLs
# -----------------------------------------------------------------------------

# Your application URL (used for OAuth callbacks and email links)
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Production:
# NEXT_PUBLIC_APP_URL="https://yourdomain.com"

# -----------------------------------------------------------------------------
# Redis Cache (Optional but Recommended for Production)
# -----------------------------------------------------------------------------

# Upstash Redis (Free tier available)
# Sign up at: https://upstash.com/
# UPSTASH_REDIS_REST_URL=""
# UPSTASH_REDIS_REST_TOKEN=""

# Or standard Redis URL:
# REDIS_URL="redis://localhost:6379"

# -----------------------------------------------------------------------------
# Node Environment
# -----------------------------------------------------------------------------

NODE_ENV="development"

# Production:
# NODE_ENV="production"

# =============================================================================
# SECURITY REMINDERS
# =============================================================================
# 1. NEVER commit .env or .env.local files to git
# 2. Generate new SESSION_SECRET and ENCRYPTION_SECRET for production
# 3. Use different secrets for development and production
# 4. Store production secrets in your hosting platform's environment variables
# 5. Rotate secrets periodically (every 3-6 months)
# 6. Use SSL/HTTPS in production
# 7. Enable database SSL mode in production
# =============================================================================
