# =============================================================================
# Enalysis ML Service - Environment Variables Template
# =============================================================================
# Copy this file to .env for local development
# NEVER commit .env to git - it contains secrets!
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string (MUST match main app database)
# Format: postgresql://username:password@host:port/database

# Local development:
DATABASE_URL=postgresql://postgres:YOUR_PASSWORD@localhost:5432/enalysis_mvp

# Production (must match main app):
# DATABASE_URL=postgresql://postgres:[PASSWORD]@[HOST]:5432/enalysis_mvp?sslmode=require

# -----------------------------------------------------------------------------
# API Server Configuration
# -----------------------------------------------------------------------------

# Host to bind to (0.0.0.0 for Docker, localhost for local dev)
API_HOST=0.0.0.0

# Port for the ML service API
API_PORT=8000

# Log level (debug, info, warning, error)
LOG_LEVEL=info

# Directory for caching trained models
MODEL_CACHE_DIR=./models/cache

# -----------------------------------------------------------------------------
# External APIs - Weather Service
# -----------------------------------------------------------------------------

# OpenWeatherMap API (Free tier: 1,000 calls/day, 5-day/3-hour forecast)
# Sign up at: https://openweathermap.org/api
# Required for: Weather-based solar production forecasting
OPENWEATHER_API_KEY=

# API Base URL (usually no need to change)
OPENWEATHER_BASE_URL=https://api.openweathermap.org/data/2.5

# Weather cache configuration
WEATHER_CACHE_HOURS=3  # Cache duration (matches API update frequency)
WEATHER_MAX_DAILY_CALLS=900  # Max calls per day (leaving buffer from 1000 limit)

# -----------------------------------------------------------------------------
# External APIs - Carbon Intensity (Optional)
# -----------------------------------------------------------------------------

# ElectricityMaps / CO2 Signal API (Free tier: 50 requests/hour)
# Sign up at: https://www.electricitymaps.com/free-tier-api
# Leave empty to use realistic fallback data based on Ontario grid
ELECTRICITYMAPS_API_KEY=

# Alternative env var name (CO2 Signal was the old name)
CO2SIGNAL_API_KEY=

# -----------------------------------------------------------------------------
# Python Environment (Do not change unless needed)
# -----------------------------------------------------------------------------

# Python optimizations
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1

# =============================================================================
# NOTES
# =============================================================================
# - The DATABASE_URL must match the main application's database
# - Weather API key improves solar forecast accuracy but is optional
# - Carbon API key enables real-time carbon optimization (optional)
# - Without API keys, the service uses realistic fallback data
# =============================================================================
